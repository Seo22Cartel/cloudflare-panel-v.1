# üìÖ Cron-–∑–∞–¥–∞—á–∏ –¥–ª—è Cloudflare Panel

## –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (`daily_sync.php`)

–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö Cloudflare –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏.

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:

1. **SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –†–µ–∂–∏–º SSL (off, flexible, full, strict)
   - Always Use HTTPS (–≤–∫–ª/–≤—ã–∫–ª)
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è TLS (1.0, 1.1, 1.2, 1.3)

2. **DNS –¥–∞–Ω–Ω—ã–µ:**
   - IP –∞–¥—Ä–µ—Å–∞ A-–∑–∞–ø–∏—Å–µ–π

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –ü–æ–¥—Å—á—ë—Ç –¥–æ–º–µ–Ω–æ–≤ –ø–æ SSL —Ä–µ–∂–∏–º–∞–º
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –û—Ç—á—ë—Ç –æ–± –æ—à–∏–±–∫–∞—Ö

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### Linux / Ubuntu / Debian

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00 –Ω–æ—á–∏):
0 3 * * * /usr/bin/php /path/to/cron/daily_sync.php >> /dev/null 2>&1

# –ò–ª–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º:
0 3 * * * /usr/bin/php /path/to/cron/daily_sync.php

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ PHP:
which php
```

#### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:

```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 –Ω–æ—á–∏
0 3 * * * /usr/bin/php /path/to/cron/daily_sync.php

# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00
0 0 * * * /usr/bin/php /path/to/cron/daily_sync.php

# –ö–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤
0 */12 * * * /usr/bin/php /path/to/cron/daily_sync.php

# –ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 3:00
0 3 * * 1 /usr/bin/php /path/to/cron/daily_sync.php
```

#### Windows (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á)

1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞–Ω–∏–π" (Task Scheduler)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
3. –¢—Ä–∏–≥–≥–µ—Ä: "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ" –≤ 03:00
4. –î–µ–π—Å—Ç–≤–∏–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞: `C:\php\php.exe`
   - –ê—Ä–≥—É–º–µ–Ω—Ç—ã: `"C:\path\to\cron\daily_sync.php"`

### Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Telegram –±–æ—Ç –≤ –ø–∞–ø–∫–µ `telegram_bot/`, –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç—á—ë—Ç.

#### –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞:

```
üìã –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Cloudflare

‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: 150/150
‚ùå –û—à–∏–±–æ–∫: 0
‚è± –í—Ä–µ–º—è: 45.2s

SSL —Ä–µ–∂–∏–º—ã:
‚Ä¢ Flexible: 25
‚Ä¢ Full: 100
‚Ä¢ Strict: 25

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
‚Ä¢ ‚ö†Ô∏è 25 –¥–æ–º–µ–Ω–æ–≤ —Å —Ä–µ–∂–∏–º–æ–º Flexible (–º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)
```

### –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `cron/logs/`:

```
cron/logs/daily_sync_2024-01-15.log
cron/logs/daily_sync_2024-01-16.log
...
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–∞
php cron/daily_sync.php

# –° –≤—ã–≤–æ–¥–æ–º –≤ –∫–æ–Ω—Å–æ–ª—å
php cron/daily_sync.php 2>&1
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í —Ñ–∞–π–ª–µ `daily_sync.php` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

```php
$config = [
    'batch_size' => 20,           // –î–æ–º–µ–Ω–æ–≤ –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥
    'delay_between_domains' => 1, // –°–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏
    'delay_between_batches' => 5, // –°–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏
    'telegram_enabled' => false,  // Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
];
```

### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—è–≤–ª—è–µ—Ç:

| –ü—Ä–æ–±–ª–µ–º–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| SSL = Off | –î–æ–º–µ–Ω—ã –±–µ–∑ SSL —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è |
| SSL = Flexible | –ú–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º (—Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É CF –∏ —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–µ —à–∏—Ñ—Ä—É–µ—Ç—Å—è) |
| TLS 1.0/1.1 | –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏ TLS —Å —É—è–∑–≤–∏–º–æ—Å—Ç—è–º–∏ |
| HTTPS = Off | –î–æ–º–µ–Ω—ã –±–µ–∑ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ HTTPS |

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|--------------|
| SSL Mode | **Full (strict)** - –ø–æ–ª–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ |
| Min TLS | **1.2** –∏–ª–∏ **1.3** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ |
| Always HTTPS | **On** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏

```
cron/
‚îú‚îÄ‚îÄ daily_sync.php     # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ logs/              # –ü–∞–ø–∫–∞ —Å –ª–æ–≥–∞–º–∏ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ daily_sync_2024-01-15.log
    ‚îî‚îÄ‚îÄ ...